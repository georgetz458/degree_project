<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<head>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link href="/css/Style.css" rel="stylesheet">
    <meta charset="UTF-8">
    <title>Hourly</title>
</head>
<body style="text-align: center" >
<nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom border-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">Weather Analysis</a>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="/mainStats">Main</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/weatherMap">Per Municipality</a>
                </li>
            </ul>
            <button class="btn btn-outline-light forGuest"  id="loginButton" style="display: none;">Login</button>
            <button class="btn btn-outline-light forAdmin"  id="logOutButton" style="display: none;">Logout</button>
        </div>
    </div>
</nav>
<h1 id="headline"></h1>
<br>
    <table class="table" style="width: 70%; margin: 0 auto;">
      <thead>
      <tr>
          <th>Hour</th>
          <th>Temperature</th>
          <th>Phone's Temperature Estimation</th>
          <th>Air Pressure</th>
          <th>Humidity Percentage</th>
          <th>Weather</th>
          <th>WindSpeed</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="weatherDataPerHour : ${weatherDataPerHourList}">
        <td class="align-middle" th:text="${weatherDataPerHour.getHour()}"></td>
        <td class="align-middle" th:text="${weatherDataPerHour.getTemperature()} + '°C'"/>
        <td class="align-middle" th:text="${weatherDataPerHour.getPhoneTemp()} + '°C'"/>
          <td class="align-middle" th:text="${weatherDataPerHour.getAirPressure()} + 'hPa'"/>
          <td class="align-middle" th:text="${weatherDataPerHour.getHumidityPercentage()} + '%'"/>
          <td>
              <img th:src="@{/icons/__${weatherDataPerHour.getWeatherDescription()}__.png}" />
          </td>
          <td class="align-middle" th:text="${weatherDataPerHour.getWindSpeed()} + 'm/s'"/>
      </tr>
      </tbody>
    </table>
<br>
<button class="btn btn-primary" style="float: left; margin-left: 25%" id="previousButton">Previous</button>
<button class="btn btn-primary" style="float: right; margin-right: 25%" id="nextButton">Next</button>

    <p id="demo"></p>
<script type="module">
    import {} from '/js/FirebaseFunctions.js'
    import  {hostURL} from '/js/MyFunctions.js'

    const queryString = location.search;
    const urlParams = new URLSearchParams(queryString);
    const day = Number(urlParams.get('day'));

    const previousButton = document.getElementById("previousButton");
    const nextButton = document.getElementById("nextButton");
    if(day===0){
        previousButton.style.display = 'none';
        nextButton.addEventListener('click', ()=>{

            location.replace(hostURL+"/avgPerHour?day="+(day + 1));

        });
    }
    else if(day===9){
        nextButton.style.display = 'none';
        previousButton.addEventListener('click', ()=>{

            location.replace(hostURL+"/avgPerHour?day="+(day - 1));

        });
    }
    else{
        previousButton.addEventListener('click', ()=>{

            location.replace(hostURL+"/avgPerHour?day="+(day - 1));

        });
        nextButton.addEventListener('click', ()=>{

            location.replace(hostURL+"/avgPerHour?day="+(day + 1));

        });
    }
    const headline = document.getElementById("headline");
    const dayOfMonth = 18 +day;
    headline.innerText = 'Weather Statistics of May '+dayOfMonth+" 2023";

</script>
</body>
</html>
